package graphene.protocol

import kotlin.reflect.KClass

val GRAPHENE_SPACE_ENUM_INDEX: Map<UInt8, ObjectSpace> =
    ObjectSpace.values().associateBy { it.id }
val GRAPHENE_PROTOCOL_TYPE_ENUM_INDEX: Map<UInt8, ProtocolType> =
    ProtocolType.values().associateBy { it.id }
val GRAPHENE_IMPLEMENTATION_TYPE_ENUM_INDEX: Map<UInt8, ObjectType> =
    ImplementationType.values().associateBy { it.id }

val GRAPHENE_SPACE_TYPE_INDEX: Map<ObjectSpace, Map<UInt8, ObjectType>> = mapOf(
    ObjectSpace.PROTOCOL to GRAPHENE_PROTOCOL_TYPE_ENUM_INDEX,
    ObjectSpace.IMPLEMENTATION to GRAPHENE_IMPLEMENTATION_TYPE_ENUM_INDEX,
)

val GRAPHENE_SPACE_ENUMS: List<ObjectSpace> = ObjectSpace.values().toList()
val GRAPHENE_PROTOCOL_TYPE_ENUMS: List<ProtocolType> = ProtocolType.values().toList()
val GRAPHENE_IMPLEMENTATION_TYPE_ENUMS: List<ImplementationType> = ImplementationType.values().toList()
val GRAPHENE_OBJECT_TYPE_ENUMS: List<ObjectType> = GRAPHENE_PROTOCOL_TYPE_ENUMS + GRAPHENE_IMPLEMENTATION_TYPE_ENUMS

val GRAPHENE_TYPES: List<KClass<out AbstractType>> = listOf(
    K100_NullType::class,
    K101_BaseType::class,
    K102_AccountType::class,
    K103_AssetType::class,
    K104_ForceSettlementType::class,
    K105_CommitteeMemberType::class,
    K106_WitnessType::class,
    K107_LimitOrderType::class,
    K108_CallOrderType::class,
    K109_CustomType::class,
    K110_ProposalType::class,
    K111_OperationHistoryType::class,
    K112_WithdrawPermissionType::class,
    K113_VestingBalanceType::class,
    K114_WorkerType::class,
    K115_BalanceType::class,
    K116_HtlcType::class,
    K117_CustomAuthorityType::class,
    K118_TicketType::class,
    K119_LiquidityPoolType::class,
    K120_SametFundType::class,
    K121_CreditOfferType::class,
    K122_CreditDealType::class,
    K200_GlobalPropertyType::class,
    K201_DynamicGlobalPropertyType::class,
    K202_ReservedType::class,
    K203_AssetDynamicType::class,
    K204_AssetBitassetType::class,
    K205_AccountBalanceType::class,
    K206_AccountStatisticsType::class,
    K207_TransactionHistoryType::class,
    K208_BlockSummaryType::class,
    K209_AccountTransactionHistoryType::class,
    K210_BlindedBalanceType::class,
    K211_ChainPropertyType::class,
    K212_WitnessScheduleType::class,
    K213_BudgetRecordType::class,
    K214_SpecialAuthorityType::class,
    K215_BuybackType::class,
    K216_FbaAccumulatorType::class,
    K217_CollateralBidType::class,
    K218_CreditDealSummaryType::class,
)
val GRAPHENE_ID_TYPES: List<KClass<out AbstractIdType>> = listOf(
    K100_NullIdType::class,
    K101_BaseIdType::class,
    K102_AccountIdType::class,
    K103_AssetIdType::class,
    K104_ForceSettlementIdType::class,
    K105_CommitteeMemberIdType::class,
    K106_WitnessIdType::class,
    K107_LimitOrderIdType::class,
    K108_CallOrderIdType::class,
    K109_CustomIdType::class,
    K110_ProposalIdType::class,
    K111_OperationHistoryIdType::class,
    K112_WithdrawPermissionIdType::class,
    K113_VestingBalanceIdType::class,
    K114_WorkerIdType::class,
    K115_BalanceIdType::class,
    K116_HtlcIdType::class,
    K117_CustomAuthorityIdType::class,
    K118_TicketIdType::class,
    K119_LiquidityPoolIdType::class,
    K120_SametFundIdType::class,
    K121_CreditOfferIdType::class,
    K122_CreditDealIdType::class,
    K200_GlobalPropertyIdType::class,
    K201_DynamicGlobalPropertyIdType::class,
    K202_ReservedIdType::class,
    K203_AssetDynamicIdType::class,
    K204_AssetBitassetIdType::class,
    K205_AccountBalanceIdType::class,
    K206_AccountStatisticsIdType::class,
    K207_TransactionHistoryIdType::class,
    K208_BlockSummaryIdType::class,
    K209_AccountTransactionHistoryIdType::class,
    K210_BlindedBalanceIdType::class,
    K211_ChainPropertyIdType::class,
    K212_WitnessScheduleIdType::class,
    K213_BudgetRecordIdType::class,
    K214_SpecialAuthorityIdType::class,
    K215_BuybackIdType::class,
    K216_FbaAccumulatorIdType::class,
    K217_CollateralBidIdType::class,
    K218_CreditDealSummaryIdType::class,
)

val GRAPHENE_ID_TYPE_INSTANCES: List<AbstractIdType> = listOf(
    K100_NullIdType(),
    K101_BaseIdType(),
    K102_AccountIdType(),
    K103_AssetIdType(),
    K104_ForceSettlementIdType(),
    K105_CommitteeMemberIdType(),
    K106_WitnessIdType(),
    K107_LimitOrderIdType(),
    K108_CallOrderIdType(),
    K109_CustomIdType(),
    K110_ProposalIdType(),
    K111_OperationHistoryIdType(),
    K112_WithdrawPermissionIdType(),
    K113_VestingBalanceIdType(),
    K114_WorkerIdType(),
    K115_BalanceIdType(),
    K116_HtlcIdType(),
    K117_CustomAuthorityIdType(),
    K118_TicketIdType(),
    K119_LiquidityPoolIdType(),
    K120_SametFundIdType(),
    K121_CreditOfferIdType(),
    K122_CreditDealIdType(),
    K200_GlobalPropertyIdType(),
    K201_DynamicGlobalPropertyIdType(),
    K202_ReservedIdType(),
    K203_AssetDynamicIdType(),
    K204_AssetBitassetIdType(),
    K205_AccountBalanceIdType(),
    K206_AccountStatisticsIdType(),
    K207_TransactionHistoryIdType(),
    K208_BlockSummaryIdType(),
    K209_AccountTransactionHistoryIdType(),
    K210_BlindedBalanceIdType(),
    K211_ChainPropertyIdType(),
    K212_WitnessScheduleIdType(),
    K213_BudgetRecordIdType(),
    K214_SpecialAuthorityIdType(),
    K215_BuybackIdType(),
    K216_FbaAccumulatorIdType(),
    K217_CollateralBidIdType(),
    K218_CreditDealSummaryIdType(),
)


// maps
val GRAPHENE_TYPE_TO_CLASS: Map<ObjectType, KClass<out AbstractIdType>> = mapOf(
    ProtocolType.NULL                               to K100_NullIdType::class,
    ProtocolType.BASE                               to K101_BaseIdType::class,
    ProtocolType.ACCOUNT                            to K102_AccountIdType::class,
    ProtocolType.ASSET                              to K103_AssetIdType::class,
    ProtocolType.FORCE_SETTLEMENT                   to K104_ForceSettlementIdType::class,
    ProtocolType.COMMITTEE_MEMBER                   to K105_CommitteeMemberIdType::class,
    ProtocolType.WITNESS                            to K106_WitnessIdType::class,
    ProtocolType.LIMIT_ORDER                        to K107_LimitOrderIdType::class,
    ProtocolType.CALL_ORDER                         to K108_CallOrderIdType::class,
    ProtocolType.CUSTOM                             to K109_CustomIdType::class,
    ProtocolType.PROPOSAL                           to K110_ProposalIdType::class,
    ProtocolType.OPERATION_HISTORY                  to K111_OperationHistoryIdType::class,
    ProtocolType.WITHDRAW_PERMISSION                to K112_WithdrawPermissionIdType::class,
    ProtocolType.VESTING_BALANCE                    to K113_VestingBalanceIdType::class,
    ProtocolType.WORKER                             to K114_WorkerIdType::class,
    ProtocolType.BALANCE                            to K115_BalanceIdType::class,
    ProtocolType.HTLC                               to K116_HtlcIdType::class,
    ProtocolType.CUSTOM_AUTHORITY                   to K117_CustomAuthorityIdType::class,
    ProtocolType.TICKET                             to K118_TicketIdType::class,
    ProtocolType.LIQUIDITY_POOL                     to K119_LiquidityPoolIdType::class,
    ProtocolType.SAMET_FUND                         to K120_SametFundIdType::class,
    ProtocolType.CREDIT_OFFER                       to K121_CreditOfferIdType::class,
    ProtocolType.CREDIT_DEAL                        to K122_CreditDealIdType::class,

    ImplementationType.GLOBAL_PROPERTY              to K200_GlobalPropertyIdType::class,
    ImplementationType.DYNAMIC_GLOBAL_PROPERTY      to K201_DynamicGlobalPropertyIdType::class,
    ImplementationType.RESERVED                     to K202_ReservedIdType::class,
    ImplementationType.ASSET_DYNAMIC_DATA           to K203_AssetDynamicIdType::class,
    ImplementationType.ASSET_BITASSET_DATA          to K204_AssetBitassetIdType::class,
    ImplementationType.ACCOUNT_BALANCE              to K205_AccountBalanceIdType::class,
    ImplementationType.ACCOUNT_STATISTICS           to K206_AccountStatisticsIdType::class,
    ImplementationType.TRANSACTION_HISTORY          to K207_TransactionHistoryIdType::class,
    ImplementationType.BLOCK_SUMMARY                to K208_BlockSummaryIdType::class,
    ImplementationType.ACCOUNT_TRANSACTION_HISTORY  to K209_AccountTransactionHistoryIdType::class,
    ImplementationType.BLINDED_BALANCE              to K210_BlindedBalanceIdType::class,
    ImplementationType.CHAIN_PROPERTY               to K211_ChainPropertyIdType::class,
    ImplementationType.WITNESS_SCHEDULE             to K212_WitnessScheduleIdType::class,
    ImplementationType.BUDGET_RECORD                to K213_BudgetRecordIdType::class,
    ImplementationType.SPECIAL_AUTHORITY            to K214_SpecialAuthorityIdType::class,
    ImplementationType.BUYBACK                      to K215_BuybackIdType::class,
    ImplementationType.FBA_ACCUMULATOR              to K216_FbaAccumulatorIdType::class,
    ImplementationType.COLLATERAL_BID               to K217_CollateralBidIdType::class,
    ImplementationType.CREDIT_DEAL_SUMMARY          to K218_CreditDealSummaryIdType::class,

    )
val GRAPHENE_TYPE_TO_CONSTRUCTOR = GRAPHENE_TYPE_TO_CLASS.mapValues { it.value.constructors.first() }

val GRAPHENE_ID_TYPE_FAST_ALOC: Map<KClass<out AbstractType>, AbstractIdType> =
    GRAPHENE_TYPES.zip(GRAPHENE_ID_TYPE_INSTANCES).toMap() + GRAPHENE_ID_TYPES.zip(GRAPHENE_ID_TYPE_INSTANCES).toMap()

val GRAPHENE_COMPONENTS_FAST_ALOC: Map<KClass<out GrapheneComponent>, GrapheneComponent> =
    mapOf(
        Authority::class            to Authority(),
        AccountOptions::class       to AccountOptions(),
        AssetOptions::class         to AssetOptions(),
        PublicKeyType::class        to PublicKeyType(),
        PrivateKeyType::class       to PrivateKeyType(),
        SpecialAuthority::class     to SpecialAuthority(),
    )
